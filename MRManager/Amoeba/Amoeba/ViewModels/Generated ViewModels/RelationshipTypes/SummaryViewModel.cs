// <autogenerated>
//   This file was generated by T4 code generator Amoeba-Master.tt.
//   Any changes made to this file manually will be lost next time the file is regenerated.
// </autogenerated>


using System;
using System.Collections.Generic;
using SystemMessages;
using CommonMessages;
using EventAggregator;
using EventMessages;
using Interfaces;
using EF.Entities;
using Entity.Expressions;
using JB.Collections.Reactive;
using ReactiveUI;
using ViewModelInterfaces;

namespace ViewModels
{
	public partial class RelationshipTypesSummaryListViewModel : ReactiveObject, ISummaryViewModel<IRelationshipTypesAutoView>
	{
		private static readonly RelationshipTypesSummaryListViewModel _instance;
		 static RelationshipTypesSummaryListViewModel()
		{
			_instance = new RelationshipTypesSummaryListViewModel();
		}

		public static RelationshipTypesSummaryListViewModel Instance
		{
			get { return _instance; }
		}
		MessageSource msgSource => new MessageSource(this.ToString());

		private RelationshipTypesSummaryListViewModel()
		{
			
			EventMessageBus.Current.GetEvent<EntitySetLoaded<IRelationshipTypesAutoView>>(msgSource).Subscribe(x => handleEntitySetUpdated(x.Entities));
			EventMessageBus.Current.GetEvent<LoadEntityViewDataServiceStarted<IRelationshipTypes>>(msgSource)
			   .Subscribe(x => EventMessageBus.Current.Publish(new LoadEntityView<IRelationshipTypes>(RelationshipTypesExpressions.RelationshipTypesAutoViewExpression,typeof(IRelationshipTypesAutoView), typeof(RelationshipTypesAutoView), msgSource), msgSource));
		}

		private void handleEntitySetUpdated(IList<IRelationshipTypesAutoView> entities)
		{
			EntitySet = new ObservableList<IRelationshipTypesAutoView>(entities);
		}

		private ObservableList<IRelationshipTypesAutoView> _EntitySet = new ObservableList<IRelationshipTypesAutoView>();
		public ObservableList<IRelationshipTypesAutoView> EntitySet
		{
			get
			{
				return _EntitySet;
			}
			set
			{
				this.RaiseAndSetIfChanged(ref _EntitySet, value ?? new ObservableList<IRelationshipTypesAutoView>());
			}
		}

		private IRelationshipTypesAutoView _currentEntity;

		public IRelationshipTypesAutoView CurrentEntity
		{
			get { return _currentEntity; }
			set
			{
				if (!Equals(_currentEntity, value))
				{
					this.RaiseAndSetIfChanged(ref _currentEntity, value); //value == null? CreateEntity():value
					if (_currentEntity != null) EventMessageBus.Current.Publish(new CurrentEntityChanged<IRelationshipTypes>(_currentEntity.Id,msgSource), msgSource);
				}
			}
		}

	}

}
