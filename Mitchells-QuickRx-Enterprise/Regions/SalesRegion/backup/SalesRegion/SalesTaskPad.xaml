<UserControl x:Class="SalesRegion.SalesTaskPad"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
             xmlns:System="clr-namespace:System;assembly=mscorlib"
             xmlns:acbox="clr-namespace:Aviad.WPF.Controls;assembly=Aviad.WPF.Controls"
             xmlns:barcode="clr-namespace:BarCodes;assembly=BarCodes"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:data="clr-namespace:RMSDataAccessLayer;assembly=RMSDataAccessLayer"
             xmlns:local="clr-namespace:SalesRegion"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:wd="clr-namespace:System.Windows.Data;assembly=PresentationFramework"
             Width="2000"
             Height="235"
             mc:Ignorable="d">

    <UserControl.Resources>

        <local:SalesVM x:Key="SalesVMDataSource" />
        <barcode:BarCodeValueConverter x:Key="BarCodeConverter" />
        <local:TimeSpanValueConverter x:Key="TimeC" />
        <local:NotNullValueConverter x:Key="NotNullConverter" />
        <local:DosageSourceConverter x:Key="DosageLstConverter" />
        <local:EnumMatchToBooleanConverter x:Key="EnumConverter" />
        <local:IsPharmacistVisibleConverter x:Key="IsPharmacistVisibleConverter" />
        <local:IsPharmacistNotVisibleConverter x:Key="IsPharmacistNotVisibleConverter" />
        <local:StringToNullableDateValueConverter x:Key="StringToDecimalConverter" />

        <Style x:Key="myLBStyle" TargetType="{x:Type ListBoxItem}">
            <Style.Resources>
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
            </Style.Resources>
        </Style>

        <!--  Style for the Clear Button  -->
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="0,2,40,2" />
            <Setter Property="Validation.ErrorTemplate">
                <Setter.Value>
                    <ControlTemplate>
                        <StackPanel>
                            <!--  Placeholder for the TextBox itself  -->
                            <AdornedElementPlaceholder x:Name="textBox" />
                            <TextBlock Foreground="Red" Text="{Binding [0].ErrorContent}" />
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--  SUPER IMPORTANT  -->

        <!--  Your project MUST reference PresentationFramework.Aero.  -->

        <!--  SUPER IMPORTANT  -->

        <Style x:Key="checkboxLeftSideText" TargetType="{x:Type CheckBox}">
            <Setter Property="SnapsToDevicePixels" Value="true" />
            <Setter Property="FocusVisualStyle" Value="{DynamicResource CheckBoxFocusVisual}" />
            <Setter Property="Background" Value="{DynamicResource NormalBrush}" />
            <Setter Property="BorderBrush" Value="{DynamicResource NormalBorderBrush}" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CheckBox}">

                        <DockPanel Width="Auto"
                                   HorizontalAlignment="Stretch"
                                   VerticalAlignment="Top"
                                   LastChildFill="True">

                            <Microsoft_Windows_Themes:BulletChrome Width="Auto"
                                                                   Height="Auto"
                                                                   Margin="4,0,0,0"
                                                                   HorizontalAlignment="Stretch"
                                                                   VerticalAlignment="Center"
                                                                   Background="{TemplateBinding Background}"
                                                                   BorderBrush="{TemplateBinding BorderBrush}"
                                                                   DockPanel.Dock="Right"
                                                                   IsChecked="{TemplateBinding IsChecked}"
                                                                   RenderMouseOver="{TemplateBinding IsMouseOver}"
                                                                   RenderPressed="{TemplateBinding IsPressed}" />

                            <ContentPresenter Height="Auto"
                                              HorizontalAlignment="Left"
                                              Content="{TemplateBinding Content}"
                                              RecognizesAccessKey="True" />

                        </DockPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ClearButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="border"
                                Width="16"
                                Height="16"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="2"
                                SnapsToDevicePixels="True">
                            <Grid Width="8"
                                  Height="8"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center">
                                <Path x:Name="path1"
                                      Data="M0,0 L8,8"
                                      Stroke="#ADADAD"
                                      StrokeThickness="2" />
                                <Path x:Name="path2"
                                      Data="M8,0 L0,8"
                                      Stroke="#ADADAD"
                                      StrokeThickness="2" />
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="BorderBrush" Value="#ADADAD" />
                                <Setter Property="Background" Value="DimGray" />
                                <Setter TargetName="path1" Property="Stroke" Value="DarkRed" />
                                <Setter TargetName="path2" Property="Stroke" Value="DarkRed" />
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                            <GradientStop Offset="0" Color="#FFADADAD" />
                                            <GradientStop Offset="0.5" Color="DimGray" />
                                            <GradientStop Offset="1" Color="DimGray" />
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <SolidColorBrush x:Key="ListBorder" Color="#FF7F9DB9" />

        <LinearGradientBrush x:Key="FocusBackground" StartPoint="0.5,1.667" EndPoint="0.5,0">
            <GradientStop Offset="0" Color="#FF073553" />
            <GradientStop Offset="0.796" Color="#FFA7D5F4" />
            <GradientStop Offset="1" Color="#FF5A88A8" />
        </LinearGradientBrush>

        <Style x:Key="FilterTextBoxStyle" TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="#FF1F1F1F" />
            <Setter Property="BorderBrush" Value="{StaticResource ListBorder}" />
            <Setter Property="Foreground" Value="#FFD7D7D7" />
            <Setter Property="Padding" Value="2" />
            <Setter Property="FocusVisualStyle" Value="{x:Null}" />
            <Setter Property="AllowDrop" Value="true" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBox}">
                        <Border x:Name="Bd"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                SnapsToDevicePixels="true">
                            <ScrollViewer x:Name="PART_ContentHost" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter TargetName="Bd" Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="BorderThickness" Value="0,0,0,0" />
        </Style>

        <!--<Style TargetType="{x:Type local:FilterControl}">
            <Setter Property="Background" Value="#FF1F1F1F" />

            <Setter Property="FilterOnEnter" Value="False" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:FilterControl}">
                        <Border x:Name="border"
                                Background="#ADADAD"
                                CornerRadius="3,3,3,3">
                            <Grid Margin="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <Border Grid.ColumnSpan="3"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"
                                        Background="{TemplateBinding Background}"
                                        CornerRadius="3" />
                                <Image />
                                --><!--  Source="/ComputerCastle.Demo;component/Resources/Search.png"  --><!--
                                <TextBox x:Name="PART_FilterBox"
                                         Grid.Column="1"
                                         Margin="0,1,0,1"
                                         VerticalAlignment="Center"
                                         AutoWordSelection="False"
                                         Style="{StaticResource FilterTextBoxStyle}"
                                         Text="{Binding RelativeSource={RelativeSource AncestorType={x:Type local:FilterControl}},
                                                        Path=FilterText,
                                                        Mode=OneWay,
                                                        UpdateSourceTrigger=Explicit}"
                                         local:InputBindingsManager.UpdatePropertySourceWhenEnterPressed="TextBox.Text"/>
                                <TextBlock x:Name="PART_Header"
                                           Grid.Column="1"
                                           Margin="2,0,0,0"
                                           HorizontalAlignment="Left"
                                           VerticalAlignment="Center"
                                           Foreground="#ADADAD"
                                           IsHitTestVisible="False"
                                           Text="{TemplateBinding Header}" />
                                <Button x:Name="PART_ClearButton"
                                        Grid.Column="2"
                                        Margin="0,0,4,0"
                                        Style="{StaticResource ClearButtonStyle}"
                                        Visibility="Collapsed" />
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger SourceName="PART_FilterBox" Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource FocusBackground}" />
                            </Trigger>
                            <Trigger SourceName="PART_ClearButton" Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource FocusBackground}" />
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource FocusBackground}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>-->

        <LinearGradientBrush x:Key="HighlightGray" StartPoint="0.5,0" EndPoint="0.5,1">
            <GradientStop Offset="0.002" Color="#FF484848" />
            <GradientStop Offset="0.39" Color="#FFB9B9B9" />
            <GradientStop Offset="1" Color="#FF4A4A4A" />
            <GradientStop Offset="0.628" Color="#FF9A9A9A" />
        </LinearGradientBrush>


        <!--<wd:ListCollectionView x:Key="SearchLstView" Source="{StaticResource SearchLst}" />-->


        <local:NotParentTransactionVisbilityConverter x:Key="ParentTransactionVisbilityConverter"/>


        <DataTemplate DataType="{x:Type data:PrescriptionEntry}">
            <Grid Background="#FF032039">
                <TextBox Width="52"
                         Height="29"
                         Margin="321,4,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Background="#FF1F1F1F"
                         FontSize="18.667"
                         Foreground="#FFD7D7D7"
                         GotKeyboardFocus="TextBox_GotKeyboardFocus_1"
                         RenderTransformOrigin="0.488,0.466"
                         Text="{Binding Quantity,
                                        StringFormat=n0,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <!--<DatePicker Text="{Binding ExpiryDate, Mode=OneWay}" x:Name="RepeatTxt"  HorizontalAlignment="Left" Height="23" Margin="240,119,0,0"  VerticalAlignment="Top" Width="132" Background="#FF1F1F1F" Foreground="#FF303030" RenderTransformOrigin="0.488,0.466"/>-->


                <acbox:AutoCompleteTextBox x:Name="AutoCompleteTextBox"
                                           Width="215"
                                           Height="79"
                                           Margin="11,40,0,0"
                                           HorizontalAlignment="Left"
                                           VerticalAlignment="Top"
                                           Background="#FF1F1F1F"
                                           Binding="{Binding}"
                                           FontSize="13.333"
                                           Foreground="#FFD7D7D7"
                                           ItemsSource="{Binding TransactionEntryItem.Item.DosageList}"
                                           MaxCompletions="5"
                                           Text="{Binding Dosage,
                                                          Mode=TwoWay,
                                                          ValidatesOnDataErrors=True,
                                                          ValidatesOnNotifyDataErrors=true,
                                                          UpdateSourceTrigger=PropertyChanged}"
                                           TextWrapping="Wrap" />
                <!--<TextBox   Text="{Binding Dosage,ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=true, UpdateSourceTrigger=PropertyChanged}"
											
						  TextWrapping="Wrap"  Background="#FF1F1F1F" Foreground="#FFD7D7D7" HorizontalAlignment="Left" Height="70" Margin="11,40,0,0"  VerticalAlignment="Top" Width="215" FontSize="13.333" SpellCheck.IsEnabled="True" />-->

                <TextBlock Width="77"
                           Height="19"
                           Margin="240,131,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="#FF3AC72F"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           MouseLeftButtonDown="SetDosage"
                           Text="Set Dosage"
                           TextWrapping="Wrap" />
                <CheckBox Width="49"
                          Height="20"
                          Margin="322,127,0,0"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Top"
                          HorizontalContentAlignment="Right"
                          VerticalContentAlignment="Center"
                          Content="VAT"
                          FlowDirection="LeftToRight"
                          Foreground="#FFEAEAEA"
                          IsChecked="{Binding Taxable,
                                              Mode=TwoWay,
                                              ValidatesOnNotifyDataErrors=True}"
                          Style="{StaticResource checkboxLeftSideText}" />
                <TextBox x:Name="PriceTxt"
                         Width="52"
                         Height="22"
                         Margin="321,72,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Background="#FF1F1F1F"
                         FontFamily="DS-Digital"
                         FontSize="16"
                         FontWeight="Bold"
                         Foreground="#FFD7D7D7"
                         RenderTransformOrigin="0.488,0.466"
                         Text="{Binding Price,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        TargetNullValue={x:Static sys:String.Empty},
                                        StringFormat=c}"
                         TextOptions.TextFormattingMode="Display" />
                <TextBlock Width="34"
                           Height="20"
                           Margin="282,77,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           Text="Price"
                           TextWrapping="Wrap" />
                <TextBlock Width="250"
                           Height="25"
                           Margin="11,10,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           Text="{Binding Path=TransactionEntryItem.ItemName,
                                          Mode=OneWay}"
                           TextWrapping="Wrap" />
                <TextBox x:Name="PriceTxt_Copy"
                         Width="20"
                         Height="22"
                         Margin="287,42,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Background="#FF1F1F1F"
                         FontFamily="DS-Digital"
                         FontSize="16"
                         FontWeight="Bold"
                         Visibility="{Binding Transaction.ParentTransactionId, Converter={StaticResource ParentTransactionVisbilityConverter}}"
                         Foreground="#FFD7D7D7"
                         RenderTransformOrigin="0.488,0.466"
                         Text="{Binding Repeat,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        StringFormat=n0,
                                        TargetNullValue={x:Static sys:String.Empty},
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextOptions.TextFormattingMode="Display" />
                <TextBlock Width="46"
                           Height="25"
                           Margin="236,42,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           Visibility="{Binding Transaction.ParentTransactionId, Converter={StaticResource ParentTransactionVisbilityConverter}}"
                           Text="Repeat"
                           TextWrapping="Wrap" />
                <TextBlock x:Name="PriceTxt_Copy1"
                           Width="52"
                           Height="22"
                           Margin="321,99,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontFamily="DS-Digital"
                           FontSize="16"
                           FontWeight="Bold"
                           Foreground="#FFC7DA11"
                           RenderTransformOrigin="0.488,0.466"
                           Text="{Binding Amount,
                                          Mode=OneWay,
                                          StringFormat=c,
                                          TargetNullValue={x:Static sys:String.Empty}}"
                           TextOptions.TextFormattingMode="Display" />
                <TextBlock Width="34"
                           Height="20"
                           Margin="282,104,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           Text="Total"
                           TextWrapping="Wrap" />
                <TextBlock Width="7"
            Height="20"
            Margin="310,42,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            FontSize="13.333"
            Foreground="White"
            LineHeight="13.333"
            LineStackingStrategy="BlockLineHeight"
                           Visibility="{Binding Transaction.ParentTransactionId, Converter={StaticResource ParentTransactionVisbilityConverter}}"
            Text="x"
            TextWrapping="Wrap" />
                <TextBox x:Name="PriceTxt_Copy2"
            Width="51"
            Height="22"
            Margin="322,42,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Background="#FF1F1F1F"
            FontFamily="DS-Digital"
            FontSize="16"
            FontWeight="Bold"
                         Visibility="{Binding Transaction.ParentTransactionId, Converter={StaticResource ParentTransactionVisbilityConverter}}"
            Foreground="#FFD7D7D7"
            RenderTransformOrigin="0.488,0.466"
            Text="{Binding RepeatQuantity, Mode=TwoWay, StringFormat=n0, TargetNullValue={x:Static sys:String.Empty}, UpdateSourceTrigger=PropertyChanged, ValidatesOnNotifyDataErrors=True}"
            TextOptions.TextFormattingMode="Display" />

            </Grid>
        </DataTemplate>

        <DataTemplate DataType="{x:Type data:TransactionBase}">
            <Grid Background="#FF76A5C4">
                <TextBlock Width="215"
                           Height="25"
                           Margin="11,10,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="16"
                           FontWeight="Bold"
                           Foreground="White"
                           Text="{Binding Path=TransactionId,
                                          Mode=OneWay}"
                           TextWrapping="Wrap" />
                <TextBlock Width="215"
                           Height="25"
                           Margin="250,10,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           Text="{Binding Path=Time,
                                          Mode=OneWay}"
                           TextWrapping="Wrap" />

            </Grid>
        </DataTemplate>

        <DataTemplate DataType="{x:Type local:SalesVM}">
            <DataGrid AlternatingRowBackground="#FFD4D4D4"
                      AlternationCount="1"
                      AreRowDetailsFrozen="True"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      CanUserDeleteRows="False"
                      CanUserResizeRows="False"
                      GridLinesVisibility="None"
                      IsReadOnly="True"
                      IsSynchronizedWithCurrentItem="False"
                      ItemsSource="{Binding TransactionList}"
                      SelectionChanged="DataGrid_SelectionChanged_1">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding TransactionNumber,
                                                          Mode=OneWay}"
                                        ClipboardContentBinding="{x:Null}"
                                        Header="Trans#" />
                    <DataGridTextColumn Binding="{Binding Time,
                                                          Mode=OneWay}"
                                        ClipboardContentBinding="{x:Null}"
                                        Header="Time" />
                    <DataGridTextColumn Binding="{Binding TotalSales,
                                                          Mode=OneWay}"
                                        ClipboardContentBinding="{x:Null}"
                                        Header="Total Sales" />
                </DataGrid.Columns>
            </DataGrid>
        </DataTemplate>

        <DataTemplate DataType="{x:Type data:Patient}">
            <Grid Height="200" VerticalAlignment="Top">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="41*" />
                    <ColumnDefinition Width="42*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="9*" />
                    <RowDefinition Height="9*" />
                    <RowDefinition Height="13*" />
                    <RowDefinition Height="20*" />
                </Grid.RowDefinitions>
                <TextBlock Width="135"
                           Height="25"
                           Margin="10,0,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontFamily="Segoe UI Light"
                           FontSize="18"
                           Text="Add Patient"
                           TextWrapping="Wrap" />
                <TextBlock Grid.ColumnSpan="2"
                           Width="65"
                           Height="16"
                           Margin="133,8,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Guardian"
                           TextWrapping="Wrap" />
                <TextBox Grid.Column="1"
                         Width="180"
                         Height="23"
                         Margin="10.41,5,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding Guardian,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="1"
                           Width="65"
                           Height="16"
                           Margin="10,6,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="First Name"
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="1"
                         Width="120"
                         Height="23"
                         Margin="75,3,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding FirstName,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBox Grid.Row="1"
                         Grid.RowSpan="2"
                         Width="120"
                         Height="23"
                         Margin="75,34.706,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding Address,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="1"
                           Grid.Column="1"
                           Width="65"
                           Height="16"
                           Margin="5.41,6,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Last Name"
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="1"
                         Grid.Column="1"
                         Width="120"
                         Height="23"
                         Margin="70.41,3,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding LastName,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="2"
                           Width="65"
                           Height="16"
                           Margin="10,2.412,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Address"
                           TextWrapping="Wrap" />
                <TextBlock Grid.Row="2"
                           Width="65"
                           Height="16"
                           Margin="10,32.412,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Allergies"
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="2"
                         Grid.RowSpan="2"
                         Grid.ColumnSpan="2"
                         Width="193"
                         Height="23"
                         Margin="75,28.6,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding Allergies,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        TargetNullValue='',
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="2"
                           Grid.Column="1"
                           Width="65"
                           Height="16"
                           Margin="5.41,3.412,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Phone No."
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="2"
                         Grid.Column="1"
                         Width="120"
                         Height="23"
                         Margin="70.41,0.412,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding PhoneNumber,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="2"
                           Grid.Column="1"
                           Width="27"
                           Height="16"
                           Margin="98.4,28.6,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Disc. %"
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="2"
                         Grid.RowSpan="2"
                         Grid.Column="1"
                         Width="60"
                         Height="23"
                         Margin="130.4,28.6,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding Discount,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="3"
                           Width="70"
                           Height="16"
                           Margin="5,8,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Date of Birth"
                           TextWrapping="Wrap" />
                <DatePicker Grid.Row="3"
                            Width="120"
                            Height="23"
                            Margin="75,5,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Text="{Binding DOB,
                                           Mode=TwoWay,
                                           ValidatesOnNotifyDataErrors=True,
                                           UpdateSourceTrigger=PropertyChanged,
                                           TargetNullValue=''}" />
                <Button x:Name="SavePatientBtn"
                        Grid.Row="3"
                        Grid.Column="1"
                        Width="62"
                        Height="23"
                        Margin="130.41,12,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        Click="SavePatientBtn_Click"
                        Content="Save" />
                <RadioButton Grid.Row="3"
                             Grid.Column="1"
                             Width="72"
                             Height="25"
                             Margin="10.41,10,0,0"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Top"
                             Content="Female"
                             GroupName="Sex"
                             IsChecked="{Binding Sex,
                                                 Mode=TwoWay,
                                                 ValidatesOnNotifyDataErrors=True,
                                                 Converter={StaticResource EnumConverter},
                                                 ConverterParameter=True,
                                                 UpdateSourceTrigger=PropertyChanged}" />
                <RadioButton Grid.Row="3"
                             Grid.Column="1"
                             Width="55"
                             Height="25"
                             Margin="70.41,10,0,0"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Top"
                             Content="Male"
                             GroupName="Sex"
                             IsChecked="{Binding Sex,
                                                 Mode=TwoWay,
                                                 ValidatesOnNotifyDataErrors=True,
                                                 Converter={StaticResource EnumConverter},
                                                 ConverterParameter=False,
                                                 UpdateSourceTrigger=PropertyChanged}" />

            </Grid>

        </DataTemplate>

        <DataTemplate DataType="{x:Type data:Doctor}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="41*" />
                    <ColumnDefinition Width="42*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="25*" />
                    <RowDefinition Height="30*" />
                    <RowDefinition Height="35*" />
                    <RowDefinition Height="31*" />
                </Grid.RowDefinitions>
                <TextBlock Width="135"
                           Height="25"
                           Margin="10,0,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontFamily="Segoe UI Light"
                           FontSize="18"
                           Text="Add Doctor"
                           TextWrapping="Wrap" />
                <TextBlock Grid.Row="1"
                           Width="65"
                           Height="16"
                           Margin="10,6,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="First Name"
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="1"
                         Width="120"
                         Height="23"
                         Margin="75,3,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding FirstName,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="1"
                           Grid.Column="1"
                           Width="65"
                           Height="16"
                           Margin="5,6,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Last Name"
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="1"
                         Grid.Column="1"
                         Width="120"
                         Height="23"
                         Margin="70,3,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding LastName,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="2"
                           Width="65"
                           Height="16"
                           Margin="10,9,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Address"
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="2"
                         Width="120"
                         Height="23"
                         Margin="75,6,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding Address,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="2"
                           Grid.Column="1"
                           Width="65"
                           Height="16"
                           Margin="5,9,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Phone No."
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="2"
                         Grid.Column="1"
                         Width="120"
                         Height="23"
                         Margin="70,6,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding PhoneNumber,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Grid.Row="3"
                           Width="70"
                           Height="16"
                           Margin="5,8,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Code"
                           TextWrapping="Wrap" />
                <TextBox Grid.Row="3"
                         Width="70"
                         Height="23"
                         Margin="75,5,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding Code,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}" />
                <Button x:Name="SavePatientBtn"
                        Grid.Row="3"
                        Grid.Column="1"
                        Width="67"
                        Height="23"
                        Margin="123,5,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        Click="SavePatientBtn_Click"
                        Content="Save" />

                <TextBlock Grid.Row="3"
                           Width="27"
                           Height="16"
                           Margin="7,4,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Text="Disc. %"
                           TextWrapping="Wrap" Grid.Column="1" />
                <TextBox Grid.Row="3"
                         Grid.Column="1"
                         Width="49"
                         Height="23"
                         Margin="67,5,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Text="{Binding Discount,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />


            </Grid>

        </DataTemplate>

        <DataTemplate DataType="{x:Type data:Medicine}">

            <Grid Background="#FF523A04">
                <TextBox Width="52"
                         Height="23"
                         Margin="321,10,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Background="#FF1F1F1F"
                         FontSize="18.667"
                         Foreground="#FFD7D7D7"
                         GotKeyboardFocus="TextBox_GotKeyboardFocus_1"
                         RenderTransformOrigin="0.488,0.466"
                         Text="{Binding Quantity,
                                        StringFormat=n0,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <!--<DatePicker Text="{Binding ExpiryDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" x:Name="RepeatTxt"  HorizontalAlignment="Left" Height="23" Margin="240,85,0,0"  VerticalAlignment="Top" Width="132" Background="#FF1F1F1F" Foreground="#FF303030" RenderTransformOrigin="0.488,0.466"/>-->
                <!--<ComboBox  DisplayMemberPath="{Binding Dosage,ValidatesOnDataErrors=True, ValidatesOnNotifyDataErrors=true}"
						   ItemsSource="{Binding Item,Converter={StaticResource DosageLstConverter}}"  Background="#FF1F1F1F" Foreground="#FFD7D7D7" HorizontalAlignment="Left" Height="70" Margin="11,40,0,0"  VerticalAlignment="Top" Width="215" FontSize="13.333" />-->
                <TextBox Width="161"
                         Height="41"
                         Margin="65,40,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         xml:lang="en-us"
                         Background="#FF1F1F1F"
                         FontSize="13.333"
                         Foreground="#FFD7D7D7"
                         SpellCheck.IsEnabled="True"
                         Text="{Binding SuggestedDosage,
                                        ValidatesOnDataErrors=True,
                                        ValidatesOnNotifyDataErrors=true,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Width="21"
                           Height="19"
                           Margin="240,69,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           Text="Exp"
                           TextWrapping="Wrap" />
                <TextBox x:Name="PriceTxt"
                         Width="52"
                         Height="22"
                         Margin="321,38,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Background="#FF1F1F1F"
                         FontFamily="DS-Digital"
                         FontSize="16"
                         FontWeight="Bold"
                         Foreground="#FFD7D7D7"
                         RenderTransformOrigin="0.488,0.466"
                         Text="{Binding Price,
                                        UpdateSourceTrigger=PropertyChanged,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        TargetNullValue={x:Static sys:String.Empty},
                                        StringFormat=c}"
                         TextOptions.TextFormattingMode="Display" />
                <TextBlock Width="34"
                           Height="20"
                           Margin="282,43,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           Text="Price"
                           TextWrapping="Wrap" />
                <TextBox Width="184"
                         Height="25"
                         Margin="11,10,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Background="#FF1F1F1F"
                         FontSize="13.333"
                         Foreground="#FFD7D7D7"
                         Text="{Binding ItemName,
                                        Mode=TwoWay,
                                        UpdateSourceTrigger=PropertyChanged}"
                         TextWrapping="Wrap" />
                <TextBlock Width="49"
                           Height="20"
                           Margin="11,41,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           TextWrapping="Wrap"><Run Text="Dosage" />
                    <LineBreak /><Run /></TextBlock>
                <TextBox x:Name="PriceTxt_Copy"
                         Width="52"
                         Height="22"
                         Margin="321,63,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Background="#FF1F1F1F"
                         FontFamily="DS-Digital"
                         FontSize="16"
                         FontWeight="Bold"
                         Foreground="#FFD7D7D7"
                         RenderTransformOrigin="0.488,0.466"
                         Text="{Binding SalesTax,
                                        UpdateSourceTrigger=PropertyChanged,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        StringFormat=p,
                                        TargetNullValue={x:Static sys:String.Empty}}"
                         TextOptions.TextFormattingMode="Display" />
                <TextBlock Width="34"
                           Height="20"
                           Margin="282,68,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           Text="VAT"
                           TextWrapping="Wrap" />
                <Button x:Name="SaveMedicineBtn"
                        Width="51"
                        Height="25"
                        Margin="321,113,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        Click="SaveMedicineBtn_Click"
                        Content="Save" />
                <TextBox x:Name="PriceTxt_Copy1"
                         Width="161"
                         Height="22"
                         Margin="65,86,0,0"
                         HorizontalAlignment="Left"
                         VerticalAlignment="Top"
                         Background="#FF1F1F1F"
                         FontFamily="DS-Digital"
                         FontSize="16"
                         FontWeight="Bold"
                         Foreground="#FFD7D7D7"
                         RenderTransformOrigin="0.488,0.466"
                         Text="{Binding Department,
                                        UpdateSourceTrigger=PropertyChanged,
                                        Mode=TwoWay,
                                        ValidatesOnNotifyDataErrors=True,
                                        StringFormat=c,
                                        TargetNullValue={x:Static sys:String.Empty}}"
                         TextOptions.TextFormattingMode="Display" />
                <TextBlock Width="34"
                           Height="20"
                           Margin="10,89,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           Text="Dept"
                           TextWrapping="Wrap" />
                <TextBlock Width="34"
                           Height="20"
                           Margin="282,13,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           FontSize="13.333"
                           Foreground="White"
                           LineHeight="13.333"
                           LineStackingStrategy="BlockLineHeight"
                           Text="Qty"
                           TextWrapping="Wrap" />
                <CheckBox Width="90"
                          Height="23"
                          Margin="136,113,0,0"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Top"
                          Content="Inactive"
                          IsChecked="{Binding Inactive,
                                              UpdateSourceTrigger=PropertyChanged}" />

            </Grid>

        </DataTemplate>
    </UserControl.Resources>

    <Border x:Name="SalesPad"
            Grid.Row="1"
            Grid.Column="1"
            Grid.ColumnSpan="2"
            Width="610"
            Height="235"
            Margin="0,0,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Background="{DynamicResource HighlightGray}"
            BorderBrush="#FF505050"
            BorderThickness="1"
            ClipToBounds="False"
            CornerRadius="3"
            FocusManager.FocusedElement="{Binding ElementName=InputTxt}"
            UIElement.PreviewKeyDown="SalesPad_PreviewKeyDown_1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="15" Opacity="0.725" />
        </Border.Effect>

        <Grid Margin="9.2,16.2,-1400.2,2.4">

            <Grid Width="1999"
                  Height="180"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  ClipToBounds="False"
                  MouseLeftButtonDown="Grid_MouseLeftButtonDown">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="EntryCol" Width="400" />
                    <ColumnDefinition x:Name="TotalsCol" Width="202" />
                    <ColumnDefinition x:Name="PaymentCol" Width="400" />
                    <ColumnDefinition x:Name="ChangeCol" Width="400" />
                    <ColumnDefinition x:Name="PrintCol" Width="200" />
                    <ColumnDefinition x:Name="ReceiptCol" Width="400" />
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="TransStatusTxt"
                           Grid.ColumnSpan="1"
                           Width="286"
                           Height="23"
                           Margin="0,-16,0,0"
                           HorizontalAlignment="Left"
                           VerticalAlignment="Top"
                           Focusable="True"
                           FontSize="16"
                           Foreground="#FFEF9D9D"
                           LostFocus="TransStatusTxt_LostFocus_1"
                           Text="{Binding Instance.TransactionData.Status,
                                          Mode=OneWay,
                                          Source={StaticResource SalesVMDataSource}}" />
                <Grid x:Name="TransactionGrd"
                      Width="382"
                      Margin="12,49,6,-25"
                      Background="#FF464646"
                      Focusable="False">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="134*" />
                        <ColumnDefinition Width="57*" />
                    </Grid.ColumnDefinitions>

                    <Button x:Name="SearchBtn"
                            Grid.ColumnSpan="2"
                            Width="38"
                            Height="35"
                            Margin="248,-39,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Click="SearchBtn_Click">
                        <Button.Background>
                            <SolidColorBrush Opacity="0.0" Color="#FFDDDDDD" />
                        </Button.Background>
                        <Image Source="{DynamicResource SearchImg}" />
                    </Button>
                    <TextBox x:Name="SearchBox"
                             Width="231"
                             Height="35"
                             Margin="10,-40,0,0"
                             HorizontalAlignment="Left"
                             VerticalAlignment="Top"
                             FontSize="14"
                             PreviewKeyDown="SearchBox_PreviewKeyDown_1"
                             TextChanged="SearchBox_OnTextChanged"
                             Style="{DynamicResource FilterTextBoxStyle}"
                              />
                    <!--
                    -->
                    <ContentControl x:Name="ItemEditor"
                                    Grid.ColumnSpan="2"
                                    Margin="0,0,0,0"
                                    Background="#FF0B430A"
                                    Content="{Binding}" />
                    <Button Grid.Column="1"
                            Width="37"
                            Height="35"
                            Margin="77,-39,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Click="NewTransaction"
                            Visibility="Collapsed">
                        <Button.Background>
                            <SolidColorBrush Opacity="0.0" Color="#FFDDDDDD" />
                        </Button.Background>
                        <Image Source="{DynamicResource NewTicket}" Visibility="Collapsed" />

                    </Button>
                    <Button x:Name="ClearBtn"
                            Grid.Column="1"
                            Width="38"
                            Height="35"
                            Margin="34,-39,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Click="ClearBtn_Click">
                        <Button.Background>
                            <SolidColorBrush Opacity="0.0" Color="#FFDDDDDD" />
                        </Button.Background>
                        <TextBlock Width="28"
                                   FontWeight="Bold"
                                   Foreground="#FF203A0F"
                                   Text="Clear" />
                    </Button>

                    <Button x:Name="NextEntry"
                            Grid.Column="1"
                            Width="40"
                            Height="40"
                            Margin="135,93,-61,-12"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Background="#00000000"
                            Click="NextEntry_Click"
                            Content="&#xE10B;"
                            FontFamily="Segoe UI Symbol"
                            FontSize="20"
                            Foreground="#FF65E468" />
                    <Button x:Name="DeleteTranBtn"
                            Grid.Column="1"
                            Width="40"
                            Height="40"
                            Margin="255,93,-181,-12"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Background="#00000000"
                            Click="DeleteTranBtn_Click"
                            Content="&#xE106;"
                            FontFamily="Segoe UI Symbol"
                            FontSize="20"
                            Foreground="#FF980909"
                            RenderTransformOrigin="0.5,0.45" />






                </Grid>

                <!--  ItemsSource="{Binding Source={StaticResource SearchLstView}}"  -->
                <Canvas x:Name="ReceiptCanvas">
                    <Grid x:Name="ReceiptGrd"
                          Grid.Column="5"
                          Grid.ColumnSpan="1"
                          Canvas.Left="175"
                          Width="400"
                          Height="Auto"
                          MaxWidth="400"
                          MaxHeight="400"
                          VerticalAlignment="Top"
                          Background="#19FFFFFF"
                          DataContext="{Binding Instance.TransactionData,
                                                Source={StaticResource SalesVMDataSource}}"
                          ScrollViewer.CanContentScroll="False"
                          ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                          ScrollViewer.VerticalScrollBarVisibility="Auto">
                        <Grid.Resources>
                            <local:TransPreZeroConverter x:Key="TransPreZeroConverter" />

                            <DataTemplate DataType="{x:Type data:QuickPrescription}">
                                <Canvas>
                                    <ListView x:Name="PrescriptionEntriesRptLst"
                                              Width="288"
                                              MaxHeight="400"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              ItemsSource="{Binding TransactionEntries, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              LayoutUpdated="PrescriptionEntriesRptLst_LayoutUpdated"
                                              ScrollViewer.CanContentScroll="False"
                                              ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                              ScrollViewer.VerticalScrollBarVisibility="Auto">

                                        <ListView.ItemTemplate>
                                            <DataTemplate>

                                                <Grid x:Name="rptQuickPreEntry"
                                                      Background="{x:Null}"
                                                      ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                                      ScrollViewer.VerticalScrollBarVisibility="Hidden">
                                                    <Border Width="282"
                                                            Height="172"
                                                            Margin="-3,0,-1,0"
                                                            HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"
                                                            Background="White"
                                                            BorderBrush="{x:Null}"
                                                            BorderThickness="1">
                                                        <Grid ScrollViewer.HorizontalScrollBarVisibility="Hidden" ScrollViewer.VerticalScrollBarVisibility="Hidden">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="39*" />
                                                                <RowDefinition Height="136*" />
                                                                <RowDefinition Height="15*" />
                                                            </Grid.RowDefinitions>
                                                            <Image Width="30"
                                                                   Height="30"
                                                                   Margin="3,3,0,0"
                                                                   HorizontalAlignment="Left"
                                                                   VerticalAlignment="Top"
                                                                   Source="{DynamicResource HVLogo}"
                                                                   Stretch="UniformToFill" />
                                                            <TextBlock Margin="38,2,62,9.895"
                                                                       FontFamily="Candara"
                                                                       FontSize="16"
                                                                       FontWeight="Bold"
                                                                       Foreground="Black"
                                                                       Text="{Binding Instance.Store.Company.CompanyName,
                                                                                      Mode=OneWay,
                                                                                      Source={StaticResource SalesVMDataSource}}"
                                                                       TextWrapping="Wrap" />
                                                            <TextBlock Grid.RowSpan="2"
                                                                       Margin="46,21,71,118.579"
                                                                       FontFamily="Century Gothic"
                                                                       FontSize="9"
                                                                       FontWeight="Bold"
                                                                       Foreground="Black"
                                                                       Text="{Binding Instance.Store.Company.Motto,
                                                                                      Mode=OneWay,
                                                                                      Source={StaticResource SalesVMDataSource}}"
                                                                       TextWrapping="Wrap" />
                                                            <TextBlock Width="69"
                                                                       Height="11"
                                                                       Margin="208,3,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       FontFamily="Calibri"
                                                                       FontSize="7.5"
                                                                       FontWeight="Bold"
                                                                       Foreground="Black"
                                                                       Text="{Binding Instance.Store.Company.Address,
                                                                                      Mode=OneWay,
                                                                                      Source={StaticResource SalesVMDataSource}}"
                                                                       TextAlignment="Right"
                                                                       TextWrapping="Wrap" />
                                                            <TextBlock Grid.RowSpan="2"
                                                                       Width="69"
                                                                       Height="11"
                                                                       Margin="208,25,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       FontFamily="Calibri"
                                                                       FontSize="10"
                                                                       Foreground="Black"
                                                                       Text="{Binding Instance.Store.Company.PhoneNumber,
                                                                                      Mode=OneWay,
                                                                                      Source={StaticResource SalesVMDataSource}}"
                                                                       TextAlignment="Right"
                                                                       TextWrapping="Wrap" />
                                                            <TextBlock Width="87"
                                                                       Height="11"
                                                                       Margin="195,14,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       FontFamily="Calibri"
                                                                       FontSize="7.5"
                                                                       FontWeight="Bold"
                                                                       Foreground="Black"
                                                                       Text="{Binding Instance.Store.Company.Address1,
                                                                                      Mode=OneWay,
                                                                                      Source={StaticResource SalesVMDataSource}}"
                                                                       TextAlignment="Right"
                                                                       TextWrapping="Wrap" />
                                                            <Rectangle Grid.Row="1"
                                                                       Grid.RowSpan="2"
                                                                       Width="286"
                                                                       Height="1"
                                                                       Margin="0,136.067,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       Fill="#FFF4F4F5"
                                                                       Stroke="Black" />
                                                            <TextBlock Grid.Row="1"
                                                                       Grid.RowSpan="2"
                                                                       Width="276"
                                                                       Height="14"
                                                                       Margin="3,125,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       FontFamily="Arial"
                                                                       FontSize="8"
                                                                       FontWeight="Bold"
                                                                       Foreground="Black"
                                                                       Text="KEEP OUT THE REACH OF CHILDREN"
                                                                       TextWrapping="Wrap" />
                                                            <Grid Grid.Row="1" Margin="3,29,5,30">

                                                                <TextBlock x:Name="DosageTxt"
                                                                           Width="278"
                                                                           Margin="0,22,-6,-15.316"
                                                                           HorizontalAlignment="Left"
                                                                           FontFamily="Calibri"
                                                                           FontSize="14"
                                                                           FontWeight="Bold"
                                                                           Foreground="Black"
                                                                           Text="{Binding Dosage,
                                                                                          Mode=OneWay}"
                                                                           TextWrapping="Wrap" />
                                                                <TextBlock Width="236"
                                                                           Height="17"
                                                                           Margin="36,0,0,0"
                                                                           HorizontalAlignment="Left"
                                                                           VerticalAlignment="Top"
                                                                           FontFamily="Calibri"
                                                                           FontSize="14"
                                                                           Foreground="Black"
                                                                           Text="{Binding TransactionEntryItem.ItemName,
                                                                                          Mode=OneWay}"
                                                                           TextWrapping="Wrap" />
                                                                <TextBlock Width="32"
                                                                           Height="22"
                                                                           Margin="3,0,0,0"
                                                                           HorizontalAlignment="Left"
                                                                           VerticalAlignment="Top"
                                                                           FontFamily="Calibri"
                                                                           FontSize="16"
                                                                           Foreground="Black"
                                                                           RenderTransformOrigin="0.701,0.758"
                                                                           Text="{Binding Quantity,
                                                                                          Mode=OneWay,
                                                                                          StringFormat=n0}"
                                                                           TextWrapping="Wrap" />

                                                            </Grid>

                                                            <TextBlock Grid.Row="1"
                                                                       Width="164"
                                                                       Height="21"
                                                                       Margin="3,4.105,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       FontFamily="Segoe UI"
                                                                       Foreground="Black"
                                                                       LineHeight="12"
                                                                       RenderTransformOrigin="0.527,0.538"
                                                                       Text="Walk in Customer" />

                                                            <TextBlock Grid.Row="1"
                                                                       Width="100"
                                                                       Height="18"
                                                                       Margin="200,4.105,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       FontFamily="Calibri"
                                                                       FontSize="10"
                                                                       FontWeight="Bold"
                                                                       Foreground="Black"
                                                                       Text="{Binding Instance.TransactionData.Time,
                                                                                      Mode=OneWay,
                                                                                      StringFormat=Date: \{0:MMM-dd-yyyy\},
                                                                                      Source={StaticResource SalesVMDataSource}}"
                                                                       TextWrapping="NoWrap" />
                                                            <TextBlock Grid.Row="1"
                                                                       Width="80"
                                                                       Height="18"
                                                                       Margin="180,16.105,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       FontFamily="Calibri"
                                                                       FontSize="10"
                                                                       FontWeight="Bold"
                                                                       Foreground="Black"
                                                                       Text="{Binding TransactionEntryNumber,
                                                                                      Mode=OneWay,
                                                                                      StringFormat=Trans#:{0}}"
                                                                       TextAlignment="Right"
                                                                       TextWrapping="Wrap" />
                                                            <TextBlock Grid.Row="1"
                                                                       Width="Auto"
                                                                       Height="18"
                                                                       Margin="260,15,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       FontFamily="Calibri"
                                                                       FontSize="12"
                                                                       FontWeight="Bold"
                                                                       Foreground="Black"
                                                                       Text="{Binding Instance.TransactionPharmacist.Initials,
                                                                                      Mode=OneWay,
                                                                                      Source={StaticResource SalesVMDataSource}}"
                                                                       TextAlignment="Right"
                                                                       TextWrapping="Wrap" />
                                                            <TextBlock Width="197"
                                                                       Height="16"
                                                                       Margin="78,106,0,0"
                                                                       HorizontalAlignment="Left"
                                                                       VerticalAlignment="Top"
                                                                       Background="{x:Null}"
                                                                       FontFamily="Calibri"
                                                                       FontSize="14"
                                                                       Foreground="Black"
                                                                       Text="{Binding RepeatInfo}"
                                                                       TextWrapping="Wrap" TextAlignment="Right" Grid.Row="1" />


                                                        </Grid>
                                                    </Border>

                                                </Grid>


                                            </DataTemplate>
                                        </ListView.ItemTemplate>



                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Margin="0,0,0,0" Orientation="Vertical" />
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                    </ListView>
                                </Canvas>
                            </DataTemplate>

                            <DataTemplate DataType="{x:Type data:PrescriptionEntry}">

                                <Grid x:Name="rptQuickPreEntry"
                                      Background="{x:Null}"
                                      ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                      ScrollViewer.VerticalScrollBarVisibility="Hidden">
                                    <Border Width="281"
                                            Height="172"
                                            Margin="-3,0,0,0"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Background="White"
                                            BorderBrush="{x:Null}"
                                            BorderThickness="1">
                                        <Grid ClipToBounds="True"
                                              ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                              ScrollViewer.VerticalScrollBarVisibility="Hidden">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="39*" />
                                                <RowDefinition Height="136*" />
                                                <RowDefinition Height="15*" />
                                            </Grid.RowDefinitions>
                                            <TextBlock Margin="38,2,62,9.895"
                                                       FontFamily="Candara"
                                                       FontSize="16"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.Store.Company.CompanyName,
                                                                      Mode=OneWay,
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextWrapping="Wrap" />
                                            <TextBlock Grid.RowSpan="2"
                                                       Margin="40,21,71,118.579"
                                                       FontFamily="Century Gothic"
                                                       FontSize="9"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.Store.Company.Motto,
                                                                      Mode=OneWay,
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextWrapping="Wrap" />
                                            <TextBlock Width="69"
                                                       Height="11"
                                                       Margin="208,3,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       FontFamily="Calibri"
                                                       FontSize="7.5"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.Store.Company.Address,
                                                                      Mode=OneWay,
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextAlignment="Right"
                                                       TextWrapping="Wrap" />
                                            <TextBlock Grid.RowSpan="2"
                                                       Width="69"
                                                       Height="11"
                                                       Margin="208,25,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       FontFamily="Calibri"
                                                       FontSize="10"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.Store.Company.PhoneNumber,
                                                                      Mode=OneWay,
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextAlignment="Right"
                                                       TextWrapping="Wrap" />
                                            <TextBlock Width="87"
                                                       Height="11"
                                                       Margin="195,14,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       FontFamily="Calibri"
                                                       FontSize="7.5"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.Store.Company.Address1,
                                                                      Mode=OneWay,
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextAlignment="Right"
                                                       TextWrapping="Wrap" />

                                            <TextBlock Grid.Row="1"
                                                       Grid.RowSpan="2"
                                                       Width="165"
                                                       Height="13                                                         "
                                                       Margin="3,122.8,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       FontFamily="Arial"
                                                       FontSize="8"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="KEEP OUT THE REACH OF CHILDREN"
                                                       TextWrapping="Wrap" />
                                            <TextBlock Grid.Row="1"
                                                       Grid.RowSpan="2"
                                                       Width="126"
                                                       Height="17"
                                                       Margin="150,119.8,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       FontFamily="Arial"
                                                       FontSize="10"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.TransactionData.Patient.AllergiesEx,
                                                                      Mode=OneWay,
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextAlignment="Right"
                                                       TextWrapping="Wrap" />
                                            <Grid Grid.Row="1" Margin="3,29,5,30">

                                                <TextBlock x:Name="DosageTxt"
                                                           Width="274"
                                                           Margin="0,22,0,-14.8"
                                                           HorizontalAlignment="Left"
                                                           FontFamily="Calibri"
                                                           FontSize="14"
                                                           FontWeight="Bold"
                                                           Foreground="Black"
                                                           Text="{Binding Dosage,
                                                                          Mode=OneWay}"
                                                           TextWrapping="Wrap" />
                                                <TextBlock Width="238"
                                                           Height="17"
                                                           Margin="36,0,0,0"
                                                           HorizontalAlignment="Left"
                                                           VerticalAlignment="Top"
                                                           FontFamily="Calibri"
                                                           FontSize="14"
                                                           Foreground="Black"
                                                           Text="{Binding TransactionEntryItem.ItemName,
                                                                          Mode=OneWay}"
                                                           TextWrapping="Wrap" />
                                                <TextBlock Width="32"
                                                           Height="22"
                                                           Margin="0,0,0,0"
                                                           HorizontalAlignment="Left"
                                                           VerticalAlignment="Top"
                                                           FontFamily="Calibri"
                                                           FontSize="16"
                                                           Foreground="Black"
                                                           RenderTransformOrigin="0.701,0.758"
                                                           Text="{Binding Quantity,
                                                                          Mode=OneWay,
                                                                          StringFormat=n0}"
                                                           TextWrapping="Wrap" />
                                                <TextBlock Width="197"
                                                           Height="16"
                                                           Margin="77,76,-3,-29"
                                                           HorizontalAlignment="Left"
                                                           VerticalAlignment="Top"
                                                           Background="{x:Null}"
                                                           FontFamily="Calibri"
                                                           FontSize="14"
                                                           Foreground="Black"
                                                           Text="{Binding RepeatInfo}"
                                                           TextWrapping="Wrap" TextAlignment="Right" />
                                            </Grid>


                                            <TextBlock Grid.Row="1"
                                                       Width="139"
                                                       Height="12"
                                                       Margin="3,1.105,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       FontFamily="Calibri"
                                                       FontSize="12"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.TransactionData.Doctor.DisplayName,
                                                                      Mode=OneWay,
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextWrapping="Wrap" />
                                            <TextBlock Grid.Row="1"
                                                       Width="192"
                                                       Height="16"
                                                       Margin="3,15.8,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       FontFamily="Calibri"
                                                       FontSize="12"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.TransactionData.Patient.ContactInfo,
                                                                      Mode=OneWay,
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextWrapping="Wrap" />
                                            <TextBlock Grid.Row="1"
                                                       Width="97"
                                                       Height="18"
                                                       Margin="180,4.105,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       Background="{x:Null}"
                                                       FontFamily="Calibri"
                                                       FontSize="10"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.TransactionData.Time,
                                                                      Mode=OneWay,
                                                                      StringFormat=Date: \{0:MMM-dd-yyyy\},
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextAlignment="Right"
                                                       TextWrapping="Wrap" />
                                            <TextBlock Grid.Row="1"
                                                       Width="60"
                                                       Height="18"
                                                       Margin="199,15.8,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       FontFamily="Calibri"
                                                       FontSize="10"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding TransactionEntryNumber,
                                                                      Mode=OneWay,
                                                                      StringFormat=RX#:{0}}"
                                                       TextAlignment="Right"
                                                       TextWrapping="Wrap" />
                                            <TextBlock Grid.Row="1"
                                                       Width="19"
                                                       Height="18"
                                                       Margin="258,14.8,0,0"
                                                       HorizontalAlignment="Left"
                                                       VerticalAlignment="Top"
                                                       FontFamily="Calibri"
                                                       FontSize="12"
                                                       FontWeight="Bold"
                                                       Foreground="Black"
                                                       Text="{Binding Instance.TransactionPharmacist.Initials,
                                                                      Mode=OneWay,
                                                                      Source={StaticResource SalesVMDataSource}}"
                                                       TextAlignment="Left"
                                                       TextWrapping="Wrap" />


                                        </Grid>
                                    </Border>

                                </Grid>


                            </DataTemplate>


                            <DataTemplate DataType="{x:Type data:Prescription}">
                                <Canvas>
                                    <ListView x:Name="PrescriptionEntriesRptLst"
                                              MaxHeight="400"
                                              ItemsSource="{Binding TransactionEntries, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                                              LayoutUpdated="PrescriptionEntriesRptLst_LayoutUpdated"
                                              ScrollViewer.CanContentScroll="False"
                                              ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                              ScrollViewer.VerticalScrollBarVisibility="Auto" />

                                </Canvas>
                            </DataTemplate>

                        </Grid.Resources>
                        <ContentControl Height="Auto"
                                        Margin="50,0,50,0"
                                        Background="#FFD0D0D0"
                                        Content="{Binding}"
                                        ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                                        ScrollViewer.VerticalScrollBarVisibility="Hidden" />
                    </Grid>
                </Canvas>

                <Grid x:Name="TotalsGrd"
                      Grid.Column="1"
                      Width="163"
                      Height="107"
                      Margin="10,12,0,0"
                      HorizontalAlignment="Left"
                      VerticalAlignment="Top"
                      Background="#FF464646"
                      RenderTransformOrigin="0.5,0.5">
                    <Grid.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform />
                            <SkewTransform />
                            <RotateTransform Angle="-0.069" />
                            <TranslateTransform />
                        </TransformGroup>
                    </Grid.RenderTransform>
                    <TextBlock Width="74"
                               Height="42"
                               Margin="7,42,0,0"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top"
                               FontSize="13.333"
                               Foreground="White"
                               LineHeight="37.333"
                               LineStackingStrategy="BlockLineHeight"
                               Text="Discount %"
                               TextWrapping="Wrap" />
                    <TextBlock Width="49.9"
                               Height="41.581"
                               Margin="7.266,1,0,0"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top"
                               FontSize="16"
                               Foreground="White"
                               LineHeight="37.333"
                               LineStackingStrategy="BlockLineHeight"
                               Text="Total"
                               TextWrapping="Wrap" />
                    <TextBlock Width="72"
                               Height="29"
                               Margin="81,55,0,0"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top"
                               FontFamily="DS-Digital"
                               FontSize="21.333"
                               Foreground="White"
                               RenderTransformOrigin="-0.791,0.354"
                               Text="{Binding Instance.TransactionData.TotalDiscount,
                                              Source={StaticResource SalesVMDataSource},
                                              TargetNullValue={x:Static sys:String.Empty}}"
                               TextAlignment="Right"
                               TextWrapping="Wrap" />
                    <TextBlock x:Name="TotalSalesTxt"
                               Width="112.829"
                               Height="41.581"
                               Margin="40.171,8,0,0"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top"
                               FontFamily="DS-Digital"
                               FontSize="29.333"
                               FontWeight="Bold"
                               Foreground="White"
                               Text="{Binding Instance.TransactionData.TotalSales,
                                              Mode=OneWay,
                                              Source={StaticResource SalesVMDataSource},
                                              StringFormat=c,
                                              TargetNullValue={x:Static sys:String.Empty}}"
                               TextAlignment="Right"
                               TextWrapping="Wrap">
                        <TextBlock.Effect>
                            <DropShadowEffect BlurRadius="3"
                                              Direction="70"
                                              ShadowDepth="0"
                                              Color="#FFFFF9B3" />
                        </TextBlock.Effect>
                    </TextBlock>
                    <TextBlock Width="49.9"
                               Height="41.581"
                               Margin="7.266,67.107,0,-1.411"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top"
                               FontSize="13.333"
                               Foreground="White"
                               LineHeight="37.333"
                               LineStackingStrategy="BlockLineHeight"
                               Text="VAT"
                               TextWrapping="Wrap" />
                    <TextBlock Width="100.834"
                               Height="29.107"
                               Margin="52.166,79.581,0,-1.411"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top"
                               FontFamily="DS-Digital"
                               FontSize="21.333"
                               Foreground="White"
                               RenderTransformOrigin="-0.791,0.354"
                               Text="{Binding Instance.TransactionData.TotalTax,
                                              Source={StaticResource SalesVMDataSource},
                                              StringFormat=c,
                                              TargetNullValue={x:Static sys:String.Empty}}"
                               TextAlignment="Right"
                               TextWrapping="Wrap" />
                </Grid>
                <Grid x:Name="PrintGrd"
                      Grid.Column="2"
                      Width="180"
                      Height="136"
                      Margin="0,0,0,0"
                      HorizontalAlignment="Left"
                      VerticalAlignment="Top">
                    <Button x:Name="PrintBtn"
                            Width="111"
                            Height="25"
                            Margin="37,53,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Click="PrintBtn_Click_1"
                            Content="Print"
                            MouseRightButtonDown="PrintBtn_RightClick"
                            RenderTransformOrigin="0.47,0.671">
                        <Button.Visibility>
                            <MultiBinding Converter="{StaticResource IsPharmacistVisibleConverter}">
                                <Binding Mode="OneWay"
                                         Path="Instance.TransactionCashier"
                                         Source="{StaticResource SalesVMDataSource}" />
                                <Binding Mode="OneWay"
                                         Path="Instance.TransactionPharmacist"
                                         Source="{StaticResource SalesVMDataSource}" />
                                <MultiBinding.ConverterParameter>
                                    <System:String>Button</System:String>
                                </MultiBinding.ConverterParameter>
                            </MultiBinding>
                        </Button.Visibility>
                    </Button>

                    <Button x:Name="QuickBooksBtn"
                            Width="111"
                            Height="34"
                            Margin="37,92,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Top"
                            Click="PostToQB_Click"
                            Content="Post to QuickBooks"
                            RenderTransformOrigin="0.47,0.671">
                        <Button.Visibility>
                            <MultiBinding Converter="{StaticResource IsPharmacistVisibleConverter}">
                                <Binding Mode="OneWay"
                                         Path="Instance.TransactionCashier"
                                         Source="{StaticResource SalesVMDataSource}" />
                                <Binding Mode="OneWay"
                                         Path="Instance.TransactionPharmacist"
                                         Source="{StaticResource SalesVMDataSource}" />
                                <MultiBinding.ConverterParameter>
                                    <System:String>Button</System:String>
                                </MultiBinding.ConverterParameter>
                            </MultiBinding>
                        </Button.Visibility>
                    </Button>
                    <ComboBox x:Name="PharmacistCbo"
                              Width="160"
                              Margin="10,10,0,0"
                              HorizontalAlignment="Left"
                              VerticalAlignment="Top"
                              DisplayMemberPath="DisplayName"
                              ItemsSource="{Binding Instance.Pharmacists,
                                                    Mode=OneWay,
                                                    Source={StaticResource SalesVMDataSource}}"
                              SelectedItem="{Binding Instance.TransactionPharmacist,
                                                     Mode=OneWayToSource,
                                                     Source={StaticResource SalesVMDataSource}}"
                              SelectedValue="{Binding Instance.TransactionData.PharmacistId,
                                                      Mode=OneWayToSource,
                                                      Source={StaticResource SalesVMDataSource},
                                                      UpdateSourceTrigger=PropertyChanged}"
                              SelectedValuePath="CashierId"
                              SelectionChanged="PharmacistCbo_SelectionChanged">
                        <ComboBox.Visibility>
                            <MultiBinding Converter="{StaticResource IsPharmacistVisibleConverter}">
                                <Binding Mode="OneWay"
                                         Path="Instance.TransactionCashier"
                                         Source="{StaticResource SalesVMDataSource}" />
                                <Binding Mode="OneWay"
                                         Path="Instance.TransactionPharmacist"
                                         Source="{StaticResource SalesVMDataSource}" />
                                <MultiBinding.ConverterParameter>
                                    <System:String>Combo</System:String>
                                </MultiBinding.ConverterParameter>
                            </MultiBinding>
                        </ComboBox.Visibility>
                    </ComboBox>
                </Grid>

            </Grid>

            <TextBlock x:Name="BackBtn"
                       Width="40"
                       Height="40"
                       Margin="-45,0,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Background="#00000000"
                       FontFamily="Segoe UI Symbol"
                       FontSize="40"
                       MouseLeftButtonDown="BackBtn_MouseLeftButtonDown"
                       Text="&#xE239;">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Foreground" Value="#FFC5F7B7" />
                        <Style.Triggers>

                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="ForestGreen" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            <TextBlock x:Name="NextBtn"
                       Width="40"
                       Height="40"
                       Margin="595,0,0,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       FontFamily="Segoe UI Symbol"
                       FontSize="40"
                       MouseLeftButtonDown="NextBtn_MouseLeftButtonDown"
                       Text="&#xE23A;">
                <TextBlock.Style>
                    <Style TargetType="{x:Type TextBlock}">
                        <Setter Property="Foreground" Value="#FFC5F7B7" />
                        <Style.Triggers>

                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Foreground" Value="ForestGreen" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
            <TextBox  Margin="700,0,0,0"
                      HorizontalAlignment="Left"
                      VerticalAlignment="Top"
                      Width="350"
                      Height="200"
                      Text="{Binding Instance.TransactionData.CurrentTransactionEntry.Comment,
                                                     Mode=TwoWay,
                                                    TargetNullValue='Comments',
                                                    UpdateSourceTrigger=PropertyChanged,
                                                     Source={StaticResource SalesVMDataSource}}"
                />

            <ListView x:Name="SearchListCtl"
                      Grid.ColumnSpan="2"
                      Width="530"
                      Margin="10,47,0,-12"
                      HorizontalAlignment="Left"
                      Background="LightGray"
                      Focusable="False"
                      ItemContainerStyle="{StaticResource myLBStyle}"
                      ItemsSource="{Binding Instance.SearchList,
                                            Source={StaticResource SalesVMDataSource}}"
                      MouseLeftButtonUp="SearchListCtl_MouseLeftButtonUp_1"
                      Visibility="Collapsed">
                <ListView.Resources>
                    <DataTemplate DataType="{x:Type data:Doctor}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Width="240"
                                       FontSize="14"
                                       Foreground="Black"
                                       Text="{Binding Path=DisplayName,
                                                      Mode=OneWay}" />
                            <TextBlock x:Name="EditDoctorItemTB"
                                       Width="40"
                                       Foreground="Black"
                                       MouseLeftButtonDown="EditItemTB_MouseLeftButtonDown"
                                       Text="Edit..." />
                            <TextBlock x:Name="doctorPrescriptionBtn"
                                       Width="80"
                                       Foreground="Black"
                                       MouseLeftButtonDown="PatientPrescriptionBtn_MouseLeftButtonDown"
                                       Text="Transactions..." />
                        </StackPanel>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type data:Patient}">

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Width="240"
                                       FontSize="14"
                                       Foreground="Black"
                                       Text="{Binding Path=ContactInfo,
                                                      Mode=OneWay}" />
                            <TextBlock x:Name="EditItemTB"
                                       Width="40"
                                       Foreground="Black"
                                       MouseLeftButtonDown="EditItemTB_MouseLeftButtonDown"
                                       Text="Edit..." />
                            <TextBlock x:Name="PatientPrescriptionBtn"
                                       Width="80"
                                       Foreground="Black"
                                       MouseLeftButtonDown="PatientPrescriptionBtn_MouseLeftButtonDown"
                                       Text="Transactions..." />

                        </StackPanel>
                    </DataTemplate>

                    <DataTemplate DataType="{x:Type data:SearchItem}">
                        <TextBlock FontSize="14"
                                   Foreground="Black"
                                   Text="{Binding Path=DisplayName,
                                                  Mode=OneWay}" />
                    </DataTemplate>



                    <DataTemplate DataType="{x:Type data:Medicine}">
                        <Grid Height="50">
                            <TextBlock Height="25"
                                       Margin="45,0,185,25"
                                       FontSize="14"
                                       FontWeight="Bold"
                                       Foreground="#FF192560"
                                       Text="{Binding DisplayName,
                                                      Mode=OneWay}"
                                       TextWrapping="Wrap" />
                            <TextBlock x:Name="EditItemTB"
                                       Width="40"
                                       Margin="460,5,0,25"
                                       FontWeight="Bold"
                                       Foreground="#FF982102"
                                       MouseLeftButtonDown="EditItemTB_MouseLeftButtonDown"
                                       Text="Edit..." />
                            <TextBlock Margin="0,15,460,15"
                                       FontSize="12"
                                       Foreground="#FF192560"
                                       Text="{Binding ItemNumber,
                                                      Mode=OneWay}" />
                            <TextBlock Height="25"
                                       Margin="320,0,135,25"
                                       Foreground="#FF192560"
                                       Text="{Binding VatPrice,
                                                      Mode=OneWay,
                                                      StringFormat=c}"
                                       TextAlignment="Center" />
                            <TextBlock Height="25"
                                       Margin="369,0,90,25"
                                       FontSize="14"
                                       FontWeight="Bold"
                                       Foreground="#FF192560"
                                       Text="{Binding Quantity,
                                                      Mode=OneWay,
                                                      StringFormat=n0}"
                                       TextAlignment="Center" />
                            <TextBlock Height="25"
                                       Margin="413,0,45,25"
                                       Foreground="#FF192560"
                                       Text="{Binding Size,
                                                      Mode=OneWay}" />
                            <TextBlock Height="25"
                                       Margin="45,25,160,0"
                                       FontSize="12"
                                       Foreground="#FF192560"
                                       Text="{Binding Description,
                                                      Mode=OneWay}" />
                            <TextBlock Height="25"
                                       Margin="345,25,45,0"
                                       Foreground="#FF192560"
                                       Text="{Binding UnitOfMeasure,
                                                      Mode=OneWay}"
                                       TextAlignment="Right" />
                        </Grid>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type data:Item}">
                        <TextBlock Foreground="Black" Text="{Binding Path=DisplayName, Mode=OneWay}" />
                    </DataTemplate>

                </ListView.Resources>

            </ListView>



        </Grid>

    </Border>

</UserControl>
